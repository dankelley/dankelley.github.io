<!DOCTYPE HTML>
<html>
<head>
<link rel='stylesheet' type='text/css' href='https://dankelley.github.io/css/syntax.css' />
<link rel='stylesheet' type='text/css' href='https://dankelley.github.io/css/style.css' />
<meta charset="UTF-8">
<title>Valentines-day full moon</title>
</head>

<body>
<div class="navbar">
    <!-- <div class="navbar-inner"> -->
        <!-- <a class="brand" href="/index.html">Dan Kelley</a> -->
        <!-- <div class="nav">Dan Kelley</div> -->
        <ul class="navbar">
            
            <li><a href="/index.html">Dan Kelley</a></li>
            

            
            <li><a href="/papers.html">Papers</a></li>
            

            
            <li><a href="/book.html">Book</a></li>
            

            
            <li><a href="/software.html">Software</a></li>
            
            
            <li><a href="/blog">Blog</a></li>
            

        </ul>
        <!-- </div> -->
</div>

<div id="content">
    




<!-- <div class="span8"> -->

<div class=topnav>

<a class="pagination" href="/r/2014/02/17/demodulation.html" title="demodulating time series">
    Next <!-- &rarr; -->
</a>

<!-- | <a href='/blog'>Home</a> | -->

<a class="pagination" href="/r/2014/02/11/oce_runlm.html" title="oce runlm function">
    <!-- &larr; --> Previous
</a>

</div> <!-- topnav -->


<div class="page-header">

    <div class=post_title>Valentines-day full moon</div>
<!-- </div> --> <!-- span8 -->

<!-- <div class="span4"> -->

<div class=slug>
    <span class=post_date>
        Feb 13, 2014
    </span> <!-- post_date -->
    <span class=post_tags>
        
        <a href="/tags/R/index.html" class="tag">
            R
        </a>
         &#183; 
        
        <a href="/tags/astronomy/index.html" class="tag">
            astronomy
        </a>
         &#183; 
        
        <a href="/tags/romance/index.html" class="tag">
            romance
        </a>
        
        
    </span> <!-- post_date -->
    <div class=post_summary>
        There will be a full moon on Valentine's Day this year.  How common is that?
    </div> <!-- post_summary -->
</div> <!-- slug -->

<!-- </div> -->
<!-- span4 -->
</div> <!-- page-header -->



<h1 id="introduction">Introduction</h1>

<p>A wise person told me that it will be a full moon on the upcoming Valentine’s Day, but that it will be a long time until another one.  I decided to check this with astronomical calculation.</p>

<h1 id="procedure">Procedure</h1>

<p>The Oce package has a function called <code class="language-plaintext highlighter-rouge">moonAngle()</code> that returns, among other things, the illuminated fraction of the moon visible at any given time.  This can be used to test for a full moon on Valentine’s day.</p>

<p>The first step is to construct the times of Valentine’s days, starting with the one this year.  Then the illuminated fraction can be calculated (here, for Halifax, the lover’s capital of Canada), and that fraction can be plotted for each of the next fifty years, with red dots for the romantic times, and blue ones for the so-sad ones.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="n">times</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">seq</span><span class="p">(</span><span class="n">as.POSIXct</span><span class="p">(</span><span class="s2">"2014-02-14"</span><span class="p">,</span><span class="w"> </span><span class="n">tz</span><span class="o">=</span><span class="s2">"UTC"</span><span class="p">),</span><span class="w"> </span><span class="n">length.out</span><span class="o">=</span><span class="m">50</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="o">=</span><span class="s2">"year"</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">oce</span><span class="p">)</span><span class="w">
</span><span class="n">fraction</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">moonAngle</span><span class="p">(</span><span class="n">times</span><span class="p">,</span><span class="w"> </span><span class="n">lon</span><span class="o">=</span><span class="m">-63</span><span class="p">,</span><span class="w"> </span><span class="n">lat</span><span class="o">=</span><span class="m">43</span><span class="p">)</span><span class="o">$</span><span class="n">illuminatedFraction</span><span class="w">
</span><span class="n">full</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">fraction</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">0.99</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">times</span><span class="p">,</span><span class="w"> </span><span class="n">fraction</span><span class="p">,</span><span class="w"> </span><span class="n">xlab</span><span class="o">=</span><span class="s2">"Year"</span><span class="p">,</span><span class="w"> </span><span class="n">ylab</span><span class="o">=</span><span class="s2">"Moon Illuminated Fraction"</span><span class="p">,</span><span class="w">
     </span><span class="n">col</span><span class="o">=</span><span class="n">ifelse</span><span class="p">(</span><span class="n">full</span><span class="p">,</span><span class="w"> </span><span class="s2">"red"</span><span class="p">,</span><span class="w"> </span><span class="s2">"blue"</span><span class="p">),</span><span class="w"> </span><span class="n">pch</span><span class="o">=</span><span class="m">16</span><span class="p">,</span><span class="w"> </span><span class="n">cex</span><span class="o">=</span><span class="m">2</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></figure>

<p><img src="http://dankelley.github.io/figs/2014-02-13-valentine-moon/valentines-1.png" alt="center" /></p>

<p>Here, red has been used to indicate years with full moon on Valentine’s Day, and sad blue otherwise.</p>

<h1 id="results">Results</h1>

<p>It will be a long time until the next full moon on Valentine’s Day:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
</pre></td><td class="code"><pre><span class="n">times</span><span class="p">[</span><span class="n">full</span><span class="p">]</span>
</pre></td></tr></tbody></table></code></pre></figure>

<figure class="highlight"><pre><code class="language-text" data-lang="text">## [1] "2014-02-14 UTC" "2033-02-14 UTC" "2044-02-14 UTC" "2052-02-14 UTC"
## [5] "2063-02-14 UTC"</code></pre></figure>

<h1 id="conclusions">Conclusions</h1>

<ul>
  <li>Buy candy now.</li>
</ul>

<h1 id="resources">Resources</h1>

<ul>
  <li>R source code used here: <a href="/assets/2014-02-13-valentine-moon.R">2014-02-13-valentine-moon.R</a></li>
  <li>Jekyll source code for this blog entry: <a href="https://raw.github.com/dankelley/dankelley.github.io/master/assets/2014-02-13-valentine-moon.Rmd">2014-02-13-valentine-moon.Rmd</a></li>
</ul>




</div>

<p class="footnote">This website is written in <a
href="http://jekyllrb.com">Jekyll</a>, and the source is available on <a
href="https://github.com/dankelley/dankelley.github.io">GitHub</a>.</p>

</body>
</html>

